<h1 mat-dialog-title>
    Zestaw Fitruna {{data.name}}
</h1>
<div mat-dialog-content>
    <form class="box_style_3" [formGroup]="mainForm" novalidate (ngSubmit)="addItem()">
        <div *ngIf="data.NoBasketWithGenericProductSelectionMode">
            <mat-form-field appearance="legacy"
                            style="width: 100%"
            >
                <mat-label>Produkt</mat-label>
                <mat-select
                        [(ngModel)]="data.productId"
                        formControlName="productIds"
                        id="productIds"
                        name="productIds"
                        required
                >
                    <mat-option [value]="product.id"
                            *ngFor="let product of productIds"
                    >{{product.name}}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="hasError('productIds', 'required')">Pole "Produkt" jest wymagane.</mat-error>
            </mat-form-field>
        </div>
        <div *ngIf="data.productId || !data.NoBasketWithGenericProductSelectionMode">
            <mat-form-field appearance="legacy">
                <mat-label>Ilość zestawów</mat-label>
                <input type="number"
                       matInput
                       placeholder="Wpisz ilość zestawów"
                       value="1"
                       [(ngModel)]="data.count"
                       required
                       formControlName="count"
                       name="count"
                       id="count"
                       autocomplete="off"
                >
                <mat-error *ngIf="hasError('count', 'required')">Pole "Ilość zestawów" jest wymagana.</mat-error>
            </mat-form-field>
        </div>
        <div *ngIf="data.productId || !data.NoBasketWithGenericProductSelectionMode">
            <mat-form-field appearance="legacy"
                            style="width: 100%"
                            class="nomargin_top"
            >
                <mat-label>Kaloryczność</mat-label>
                <mat-select
                        [(ngModel)]="data.caloriesId"
                        required
                        formControlName="calories"
                        id="calories"
                        name="calories"
                        placeholder="Wybierz kaloryczność"
                >
                    <mat-option
                            [value]="calory.id"
                            *ngFor="let calory of calories"
                    >
                        {{calory.name}} kcal
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="hasError('calories', 'required')">
                    Pole "kaloryczność" jest wymagane.
                </mat-error>
            </mat-form-field>
        </div>
        <div *ngIf="data.productId || !data.NoBasketWithGenericProductSelectionMode">
            <mat-form-field style="width: 100%"
                            appearance="legacy"
                            class="nomargin_top"
            >
                <mat-label>Rozpoczęcie diety</mat-label>
                <input matInput
                       [matDatepicker]="resultPicker"
                       [(ngModel)]="data.startDate"
                       [matDatepickerFilter]="dateFilter"
                       (click)="resultPicker.open()"
                       formControlName="startDate"
                       name="startDate"
                       id="startDate"
                       [min]="minDate"
                       required
                       autocomplete="off"
                >
                <mat-datepicker #resultPicker>
                </mat-datepicker>
            </mat-form-field>
        </div>
        <div *ngIf="data.productId || !data.NoBasketWithGenericProductSelectionMode">
            <mat-form-field appearance="legacy"
                            style="width: 100%"
                            class="nomargin_top"
            >
                <mat-label>Długość diety</mat-label>
                <mat-select
                        [(ngModel)]="data.periodLengthInDays"
                        formControlName="period"
                        id="period"
                        required
                >
                    <mat-option value="{{period.days}}"
                                *ngFor="let period of periods"
                    >{{period.name}}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="hasError('period', 'required')">Pole "Długość diety" jest wymagane.</mat-error>
            </mat-form-field>
        </div>

        <div class="divider" *ngIf="1">
            <span>Dodatkowe informacje</span>
        </div>
        <table class="table table_summary" *ngIf="1">
            <tbody>
            <tr>
                <td>
                    <b>Dieta w weekendy</b>
                    <span class="float-right">
                        <mat-slide-toggle
                                class="float-right"
                                [(ngModel)]="data.weekendsIncluded"
                                formControlName="weekend">

                    </mat-slide-toggle></span>
                </td>
            </tr>
            <tr>
                <td><b>Biodegradowalne sztućce</b>
                    <span class="float-right">
                        <mat-slide-toggle
                                class="float-right"
                                [(ngModel)]="data.cutleryIncluded"
                                formControlName="cutlery">
                        </mat-slide-toggle>
                </span>
                </td>
            </tr>
            </tbody>
        </table>
        <div class="divider" *ngIf="1">
            <span>Podsumowanie</span>
        </div>
        <table class="table table_summary" *ngIf="1">
            <tbody>
            <tr>
                <td>
                    <b>Dni łącznie </b>
                    <span class="float-right">14 dni</span>
                </td>
            </tr>
            <tr>
                <td><b>Całość</b><span
                        class="float-right">123456 zł</span>
                </td>
            </tr>
            </tbody>
        </table>
    </form>
</div>
<div mat-dialog-actions>
    <button class="btn_full nomargin_top"
            [disabled]="!mainForm.valid"
            *ngIf="mainForm.valid"
            type="submit"
            (click)="addItem()"
    >Dodaj do koszyka
    </button>
    <button class="btn-danger btn_full nomargin_top"
            *ngIf="!mainForm.valid"
            type="submit"
    >Wybierz, aby przejść dalej.
    </button>
</div>
